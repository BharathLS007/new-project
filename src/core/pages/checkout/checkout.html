<div class="container">
  <div class="checkout-inner">
    <div class="breadcrumb">Home &gt; Cart &gt; Checkout</div>
    <div class="checkout-top">
      <div class="title">Checkout</div>
      <div class="small-note">Secure transaction â€¢ 256-bit SSL</div>
    </div>

    <div *ngIf="isOrdered" class="order-confirmation">
      <h3>Thank you! Your order has been placed.</h3>
      <p>You will be redirected to your orders shortly.</p>
    </div>

    <div *ngIf="!isOrdered" class="checkout-grid">
      <div class="shipping-column">
        <div class="form-section">
          <h3>Shipping Address</h3>
          <form [formGroup]="shippingForm" (ngSubmit)="placeOrder()">
            <label>Name</label>
            <input formControlName="name" type="text" placeholder="Full name" />
            <div class="error" *ngIf="shippingForm.get('name')?.touched && shippingForm.get('name')?.invalid">Name is required</div>

            <label>Address</label>
            <input formControlName="address" type="text" placeholder="Street address, unit, etc." />
            <div class="error" *ngIf="shippingForm.get('address')?.touched && shippingForm.get('address')?.invalid">Address is required</div>

            <label>City</label>
            <input formControlName="city" type="text" placeholder="City" />
            <div class="error" *ngIf="shippingForm.get('city')?.touched && shippingForm.get('city')?.invalid">City is required</div>

            <label>Phone</label>
            <input formControlName="phone" type="text" placeholder="Phone number" />
            <div class="error" *ngIf="shippingForm.get('phone')?.touched && shippingForm.get('phone')?.invalid">Enter a valid phone number</div>

            <div class="checkout-actions">
              <button type="submit" class="btn-place-order" [disabled]="shippingForm.invalid || cartItems().length === 0">Add</button>
            </div>
          </form>
        </div>

        <div class="form-section" style="margin-top:16px;">
          <h3>Payment</h3>
          <p class="product-meta">This demo doesn't process payments. Integrate your payment gateway here.</p>
        </div>
      </div>

      <aside class="order-summary price-block">
        <h3>Order Summary ({{totalItems()}} items)</h3>
        <div *ngFor="let item of cartItems()" class="summary-item">
          <div>
            <div class="product-name">{{item.name}}</div>
            <div class="product-meta">{{item.quantity}} x ${{item.price.toFixed(2)}}</div>
          </div>
          <div class="product-price">${{(item.price * item.quantity).toFixed(2)}}</div>
        </div>

        <div class="summary-total">
          <span>Subtotal:</span>
          <span class="value">${{totalPrice().toFixed(2)}}</span>
        </div>
        <div class="summary-total">
          <span>Shipping:</span>
          <span class="value">Free</span>
        </div>
        <div class="summary-total" style="font-size:1.15rem; margin-top:8px;">
          <span>Total:</span>
          <span class="value">${{totalPrice().toFixed(2)}}</span>
        </div>

        <div class="checkout-actions" style="margin-top:14px;">
          <button type="button" class="btn-place-order" (click)="placeOrder()" [disabled]="shippingForm.invalid || cartItems().length === 0">Place your order</button>
        </div>

        <div class="small-note">By placing your order you agree to our Terms and Conditions.</div>
      </aside>
    </div>
  </div>
</div>

<app-footer></app-footer>
